---
  - hosts: all
    gather_facts: true
    remote_user: root

    vars_files:
      - vars/main.yaml

    tasks:
    - name: Create Ansible Service Account
      import_role:
        name: mikepruett3.user_setup
      vars:
        user_account: '{{ ansible_service_user }}'
        user_password_enc: '{{ ansible_service_pass_enc }}'
        user_account_key: '{{ ansible_service_account_key }}'

    - name: Create Regular Account
      import_role:
        name: mikepruett3.user_setup
      vars:
        user_account: '{{ regular_user }}'
        user_password_enc: '{{ regular_pass_enc }}'
        user_account_key: '{{ regular_account_key }}'

    - name: Import mikepruett3.user_setup role
      import_role:
        name: mikepruett3.user_setup

    - name: Import geerlingguy.repo-epel role
      import_role:
        name: geerlingguy.repo-epel

    - name: Import geerlingguy.security role
      import_role:
        name: geerlingguy.security

    - name: Import geerlingguy.ntp role
      import_role:
        name: geerlingguy.ntp

    - name: Import geerlingguy.firewall role
      import_role:
        name: geerlingguy.firewall